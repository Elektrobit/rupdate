<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="687px" preserveAspectRatio="none" style="width:1081px;height:687px;" version="1.1" viewBox="0 0 1081 687" width="1081px" zoomAndPan="magnify"><defs><filter height="300%" id="f5xclvykfw7m1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5xclvykfw7m1)" height="673.429" style="stroke: #000000; stroke-width: 1.0;" width="1067.5" x="3" y="3"/><path d="M195,4 L195,15.0679 L185,25.0679 L3,25.0679 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="6" y="18.9659">uc install of update bundle</text><rect fill="#DDDDDD" height="626.0521" style="stroke: #A80036; stroke-width: 1.0;" width="204" x="116.5" y="33.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="157" y="46.9649">Build Environment</text><rect fill="#DDDDDD" height="626.0521" style="stroke: #A80036; stroke-width: 1.0;" width="522" x="540.5" y="33.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="778" y="46.9649">System</text><rect fill="#FFFFFF" filter="url(#f5xclvykfw7m1)" height="131.806" style="stroke: #000000; stroke-width: 2.0;" width="551" x="316.5" y="516.314"/><rect fill="#FFFFFF" height="48.6879" style="stroke: none; stroke-width: 1.0;" width="551" x="316.5" y="599.4321"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="50" x2="50" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="218.5" x2="218.5" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="353.5" x2="353.5" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="580.5" x2="580.5" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="785.5" x2="785.5" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="922.5" x2="922.5" y1="119.8419" y2="665.12"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1022.5" x2="1022.5" y1="119.8419" y2="665.12"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="13" y="115.7399">Integrator</text><ellipse cx="50.5" cy="43.7739" fill="#FEFECE" filter="url(#f5xclvykfw7m1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M50.5,51.7739 L50.5,78.7739 M37.5,59.7739 L63.5,59.7739 M50.5,78.7739 L37.5,93.7739 M50.5,78.7739 L63.5,93.7739 " fill="none" filter="url(#f5xclvykfw7m1)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f5xclvykfw7m1)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="120.5" y="81.7739"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="127.5" y="103.7399">update-tool-create-bundle</text><rect fill="#FEFECE" filter="url(#f5xclvykfw7m1)" height="52.1358" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="326.5" y="62.706"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="333.5" y="84.672">some</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="26" x="338.5" y="103.7399">app</text><rect fill="#FEFECE" filter="url(#f5xclvykfw7m1)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="544.5" y="81.7739"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="551.5" y="103.7399">rupdate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="713.5" y="115.7399">update environment</text><path d="M767.5,64.7739 C767.5,54.7739 785.5,54.7739 785.5,54.7739 C785.5,54.7739 803.5,54.7739 803.5,64.7739 L803.5,90.7739 C803.5,100.7739 785.5,100.7739 785.5,100.7739 C785.5,100.7739 767.5,100.7739 767.5,90.7739 L767.5,64.7739 " fill="#FEFECE" filter="url(#f5xclvykfw7m1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M767.5,64.7739 C767.5,74.7739 785.5,74.7739 785.5,74.7739 C785.5,74.7739 803.5,74.7739 803.5,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="867.5" y="115.7399">partition config</text><path d="M904.5,64.7739 C904.5,54.7739 922.5,54.7739 922.5,54.7739 C922.5,54.7739 940.5,54.7739 940.5,64.7739 L940.5,90.7739 C940.5,100.7739 922.5,100.7739 922.5,100.7739 C922.5,100.7739 904.5,100.7739 904.5,90.7739 L904.5,64.7739 " fill="#FEFECE" filter="url(#f5xclvykfw7m1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M904.5,64.7739 C904.5,74.7739 922.5,74.7739 922.5,74.7739 C922.5,74.7739 940.5,74.7739 940.5,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="987.5" y="115.7399">partitions</text><path d="M1005,64.7739 C1005,54.7739 1023,54.7739 1023,54.7739 C1023,54.7739 1041,54.7739 1041,64.7739 L1041,90.7739 C1041,100.7739 1023,100.7739 1023,100.7739 C1023,100.7739 1005,100.7739 1005,90.7739 L1005,64.7739 " fill="#FEFECE" filter="url(#f5xclvykfw7m1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1005,64.7739 C1005,74.7739 1023,74.7739 1023,74.7739 C1023,74.7739 1041,74.7739 1041,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#EEEEEE" filter="url(#f5xclvykfw7m1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1055.5" x="8" y="151.6949"/><line style="stroke: #000000; stroke-width: 1.0;" x1="8" x2="1063.5" y1="151.6949" y2="151.6949"/><line style="stroke: #000000; stroke-width: 1.0;" x1="8" x2="1063.5" y1="154.6949" y2="154.6949"/><rect fill="#EEEEEE" filter="url(#f5xclvykfw7m1)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="144" x="463.75" y="139.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="469.75" y="157.7389">Update installation</text><polygon fill="#A80036" points="61.5,195.2539,51.5,199.2539,61.5,203.2539,57.5,199.2539" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55.5" x2="217.5" y1="199.2539" y2="199.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="67.5" y="193.4449">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="78.5" y="193.4449">make bundle available</text><polygon fill="#A80036" points="341.5,226.9599,351.5,230.9599,341.5,234.9599,345.5,230.9599" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="50.5" x2="347.5" y1="230.9599" y2="230.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="57.5" y="225.1509">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="68.5" y="225.1509">stream the update bundle</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="395.5" y1="280.3719" y2="280.3719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="395.5" x2="395.5" y1="280.3719" y2="293.3719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="354.5" x2="395.5" y1="293.3719" y2="293.3719"/><polygon fill="#A80036" points="364.5,289.3719,354.5,293.3719,364.5,297.3719,360.5,293.3719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="360.5" y="265.7099">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="371.5" y="256.8569">streaming verification of integrity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="374.5" y="274.5629">and compatibility</text><polygon fill="#A80036" points="568.5,321.0779,578.5,325.0779,568.5,329.0779,572.5,325.0779" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="574.5" y1="325.0779" y2="325.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="360.5" y="319.2689">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="371.5" y="319.2689">stream the update bundle</text><polygon fill="#A80036" points="591.5,352.784,581.5,356.784,591.5,360.784,587.5,356.784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="585.5" x2="784.5" y1="356.784" y2="356.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="597.5" y="350.975">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="608.5" y="350.975">get the current version state</text><polygon fill="#A80036" points="910.5,384.49,920.5,388.49,910.5,392.49,914.5,388.49" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580.5" x2="916.5" y1="388.49" y2="388.49"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587.5" y="382.681">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="598.5" y="382.681">get the partition configuration of device</text><polygon fill="#A80036" points="773.5,416.196,783.5,420.196,773.5,424.196,777.5,420.196" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580.5" x2="779.5" y1="420.196" y2="420.196"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587.5" y="414.387">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="598.5" y="414.387">prohibit/allow rollback</text><polygon fill="#A80036" points="1011,447.902,1021,451.902,1011,455.902,1015,451.902" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580.5" x2="1017" y1="451.902" y2="451.902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587.5" y="446.093">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="598.5" y="446.093">write images as configured</text><polygon fill="#A80036" points="568.5,497.314,578.5,501.314,568.5,505.314,572.5,501.314" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="353.5" x2="574.5" y1="501.314" y2="501.314"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="360.5" y="486.652">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="371.5" y="477.799">terminate stream</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="374.5" y="495.505">e.g. on error</text><path d="M316.5,516.314 L379.5,516.314 L379.5,525.314 L369.5,535.314 L316.5,535.314 L316.5,516.314 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="131.806" style="stroke: #000000; stroke-width: 2.0;" width="551" x="316.5" y="516.314"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="331.5" y="531.2111">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="394.5" y="530.073">[stream termination without error]</text><polygon fill="#A80036" points="773.5,555.7261,783.5,559.7261,773.5,563.7261,777.5,559.7261" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580.5" x2="779.5" y1="559.7261" y2="559.7261"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587.5" y="553.9171">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="605.5" y="553.9171">set flags and state</text><polygon fill="#A80036" points="364.5,587.4321,354.5,591.4321,364.5,595.4321,360.5,591.4321" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="358.5" x2="579.5" y1="591.4321" y2="591.4321"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="370.5" y="585.6231">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="388.5" y="585.6231">report success</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="316.5" x2="867.5" y1="600.4321" y2="600.4321"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="321.5" y="612.191">[stream termination with error]</text><polygon fill="#A80036" points="364.5,636.12,354.5,640.12,364.5,644.12,360.5,640.12" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="358.5" x2="579.5" y1="640.12" y2="640.12"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="370.5" y="634.311">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="388.5" y="634.311">report error</text><!--MD5=[d3b7256e097248c4e8d526f27e48560a]
@startuml upd_bundle_inst_flow

hide footbox
autonumber

actor "Integrator" as sysint
box "Build Environment"
        participant "update-tool-create-bundle" as sdk
end box

        participant "some\napp" as capp

box "System"
        participant "rupdate" as updtool
        database "update environment" as updenv
        database "partition config" as partcfg
        database "partitions" as parts
end box

mainframe uc install of update bundle


== Update installation ==


sdk -> sysint : make bundle available

sysint -> capp : stream the update bundle

capp -> capp : streaming verification of integrity \n and compatibility

capp -> updtool : stream the update bundle

updenv -> updtool : get the current version state

partcfg <- updtool : get the partition configuration of device

updenv <- updtool : prohibit/allow rollback

updtool -> parts : write images as configured

capp -> updtool : terminate stream \n e.g. on error

alt stream termination without error

  updtool -> updenv :  set flags and state

  updtool -> capp : report success

else stream termination with error
  updtool -> capp : report error
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.22+7-post-Ubuntu-0ubuntu222.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
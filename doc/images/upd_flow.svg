<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="875px" preserveAspectRatio="none" style="width:723px;height:875px;" version="1.1" viewBox="0 0 723 875" width="723px" zoomAndPan="magnify"><defs><filter height="300%" id="fmhyak0nimnb3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="290.63" cy="18" fill="#000000" filter="url(#fmhyak0nimnb3)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="71.7561" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="260" x="160.63" y="89"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="160.63" x2="420.63" y1="118.0679" y2="118.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="264.63" y="108.9659">A_inuse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="240" x="165.63" y="135.896">always boots to same version, not updating</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="165.63" y="152.2401">A is in use</text><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="383.63" y="240"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="383.63" x2="579.63" y1="269.0679" y2="269.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="445.13" y="259.9659">B_installed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="388.63" y="286.896">a new version was installed in B</text><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="71.7561" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="228.63" y="374"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="228.63" x2="518.63" y1="403.0679" y2="403.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="357.13" y="393.9659">B_try</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="233.63" y="420.896">Try if B is passing selftest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="270" x="233.63" y="437.2401">Prepare revert to A if B is failing or unresponsive</text><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="240.13" y="525"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="240.13" x2="333.13" y1="554.0679" y2="554.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="260.63" y="544.9659">B_inuse</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="245.13" y="571.896">Always use B</text><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="379.63" y="659"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="379.63" x2="575.63" y1="688.0679" y2="688.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="441.13" y="678.9659">A_installed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="384.63" y="705.896">a new version was installed in B</text><rect fill="#FEFECE" filter="url(#fmhyak0nimnb3)" height="71.7561" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="332.63" y="793"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332.63" x2="622.63" y1="822.0679" y2="822.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="461.13" y="812.9659">A_try</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="337.63" y="839.896">Try if A is passing selftest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="270" x="337.63" y="856.2401">Prepare revert to B if A is failing or unresponsive</text><!--MD5=[e074ad7f685e097b3449c86c44bd4ca2]
link *start to A_inuse--><path d="M290.63,28.32 C290.63,40.72 290.63,63.43 290.63,83.62 " fill="none" id="*start-&gt;A_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="290.63,88.69,294.6557,79.7015,290.6443,83.69,286.6557,79.6786,290.63,88.69" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[dc889152f1c721a665c09a35dd32afce]
link A_inuse to B_installed--><path d="M338.33,161.09 C369.93,184.33 410.92,214.49 440.97,236.59 " fill="none" id="A_inuse-&gt;B_installed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="445.32,239.79,440.4514,231.2286,441.2962,236.8221,435.7027,237.6668,445.32,239.79" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="403.63" y="205.897">install upd-bundle to B</text><!--MD5=[5a2d74f012d9113f0a61dcef68501afe]
link B_installed to B_try--><path d="M461.06,295.26 C444.86,316.33 422.04,346.01 403.78,369.77 " fill="none" id="B_installed-&gt;B_try" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="400.66,373.83,409.3277,369.1533,403.7168,369.8733,402.9969,364.2624,400.66,373.83" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="437.63" y="339.897">reboot</text><!--MD5=[cb72249e84e430002d3f5289cfb5d2e2]
link B_try to B_inuse--><path d="M351.9,446.09 C337.74,468.95 319.44,498.5 305.82,520.5 " fill="none" id="B_try-&gt;B_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="303.17,524.79,311.3018,519.2336,305.7969,520.5356,304.4948,515.0307,303.17,524.79" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="334.63" y="490.897">finish update</text><!--MD5=[d127a0742490a2d52d88beb2940fa091]
link B_try to A_inuse--><path d="M348.5,373.82 C334.34,352.14 317.72,323.19 308.63,295 C294.89,252.45 291.11,201.05 290.31,166.19 " fill="none" id="B_try-&gt;A_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="290.22,161.17,286.4008,170.2482,290.32,166.169,294.3992,170.0882,290.22,161.17" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="309.63" y="272.897">not finish</text><!--MD5=[d95fd150804369fb5be73d9a0b528a54]
link B_inuse to A_installed--><path d="M325.28,580.21 C356.99,602.13 401.86,633.14 434.69,655.82 " fill="none" id="B_inuse-&gt;A_installed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="439.03,658.83,433.9132,650.4146,434.9211,655.981,429.3548,656.9889,439.03,658.83" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="393.63" y="624.897">install upd-bundle to A</text><!--MD5=[7d6a0007bb62a8eb57696fa71ce6aae5]
link A_installed to A_try--><path d="M477.63,714.26 C477.63,734.98 477.63,764.04 477.63,787.59 " fill="none" id="A_installed-&gt;A_try" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="477.63,792.83,481.63,783.83,477.63,787.83,473.63,783.83,477.63,792.83" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="478.63" y="758.897">reboot</text><!--MD5=[0c8b29be9a03d5b7b287312327fcb7b2]
link A_try to B_inuse--><path d="M394.98,792.97 C361.43,774.46 325.68,748.35 304.63,714 C280.56,674.74 279.96,619.81 282.63,585.46 " fill="none" id="A_try-&gt;B_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="283.08,580.13,278.3485,588.7679,282.666,585.1128,286.321,589.4303,283.08,580.13" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="305.63" y="691.897">not finish</text><!--MD5=[932c0b1a15ac659272a7acf476489882]
link A_try to A_inuse--><path d="M554.67,792.89 C593.57,769.39 632.63,734.17 632.63,687.5 C632.63,266.5 632.63,266.5 632.63,266.5 C632.63,215.97 592.28,214.65 547.63,191 C510.2,171.18 466.48,157.21 425.83,147.45 " fill="none" id="A_try-&gt;A_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="420.88,146.28,428.7285,152.2299,425.7478,147.422,430.5557,144.4414,420.88,146.28" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="633.63" y="490.897">finish update</text><!--MD5=[1ab83f79482e9929690aca82a9a845e0]
link A_inuse to B_inuse--><path d="M198.25,161.12 C131.24,192.47 46.78,245.8 13.63,325 C-31.98,433.97 144.03,506.8 235.15,536.48 " fill="none" id="A_inuse-&gt;B_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="239.96,538.03,232.633,531.4486,235.2039,536.4875,230.165,539.0583,239.96,538.03" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="14.63" y="339.897">rollback (if possible)</text><!--MD5=[2bcc6fbdf2851ead4a18a01f271647ae]
link B_inuse to A_inuse--><path d="M261.72,524.58 C244.55,504.45 222.73,475.44 210.63,446 C189.53,394.66 186.58,360.21 194.63,325 C208.06,266.25 241.16,204.66 264.73,165.84 " fill="none" id="B_inuse-&gt;A_inuse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="267.56,161.22,259.4417,166.7961,264.9435,165.4807,266.2589,170.9825,267.56,161.22" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="195.63" y="339.897">rollback (if possible)</text><!--MD5=[4eff4c8cefd11afda17d5a615494383c]
@startuml upd_flow


[*] - -> A_inuse
A_inuse: always boots to same version, not updating
A_inuse: A is in use

A_inuse - -> B_installed: install upd-bundle to B
B_installed: a new version was installed in B

B_installed - -> B_try: reboot
B_try: Try if B is passing selftest
B_try: Prepare revert to A if B is failing or unresponsive

B_try - -> B_inuse: finish update
B_inuse: Always use B

B_try - -> A_inuse: not finish

B_inuse - -> A_installed: install upd-bundle to A
A_installed:  a new version was installed in B

A_installed - -> A_try: reboot
A_try: Try if A is passing selftest
A_try: Prepare revert to B if A is failing or unresponsive

A_try - -> B_inuse: not finish

A_try - -> A_inuse: finish update

A_inuse - -> B_inuse: rollback (if possible)
B_inuse - -> A_inuse: rollback (if possible)

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.22+7-post-Ubuntu-0ubuntu222.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
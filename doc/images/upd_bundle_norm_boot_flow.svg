<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="758px" preserveAspectRatio="none" style="width:752px;height:758px;" version="1.1" viewBox="0 0 752 758" width="752px" zoomAndPan="magnify"><defs><filter height="300%" id="fhcdamnnqx0db" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fhcdamnnqx0db)" height="744.4109" style="stroke: #000000; stroke-width: 1.0;" width="738.5" x="3" y="3"/><path d="M175,4 L175,15.0679 L165,25.0679 L3,25.0679 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="6" y="18.9659">boot of software version</text><rect fill="#DDDDDD" height="697.034" style="stroke: #A80036; stroke-width: 1.0;" width="724.5" x="9" y="33.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="347.75" y="46.9649">System</text><rect fill="#FFFFFF" filter="url(#fhcdamnnqx0db)" height="441.436" style="stroke: #000000; stroke-width: 2.0;" width="585.5" x="107" y="245.9599"/><rect fill="#FFFFFF" height="156.806" style="stroke: none; stroke-width: 1.0;" width="585.5" x="107" y="373.784"/><rect fill="#FFFFFF" height="156.806" style="stroke: none; stroke-width: 1.0;" width="585.5" x="107" y="530.5899"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="54" x2="54" y1="119.8419" y2="736.1019"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="162" x2="162" y1="119.8419" y2="736.1019"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="409.5" x2="409.5" y1="119.8419" y2="736.1019"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="546.5" x2="546.5" y1="119.8419" y2="736.1019"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="646.5" x2="646.5" y1="119.8419" y2="736.1019"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="710.5" x2="710.5" y1="119.8419" y2="736.1019"/><rect fill="#FEFECE" filter="url(#fhcdamnnqx0db)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="13" y="81.7739"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="20" y="103.7399">hardware</text><rect fill="#FEFECE" filter="url(#fhcdamnnqx0db)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="117" y="81.7739"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="124" y="103.7399">bootloader</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="337.5" y="115.7399">update environment</text><path d="M391.5,64.7739 C391.5,54.7739 409.5,54.7739 409.5,54.7739 C409.5,54.7739 427.5,54.7739 427.5,64.7739 L427.5,90.7739 C427.5,100.7739 409.5,100.7739 409.5,100.7739 C409.5,100.7739 391.5,100.7739 391.5,90.7739 L391.5,64.7739 " fill="#FEFECE" filter="url(#fhcdamnnqx0db)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M391.5,64.7739 C391.5,74.7739 409.5,74.7739 409.5,74.7739 C409.5,74.7739 427.5,74.7739 427.5,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="491.5" y="115.7399">partition config</text><path d="M528.5,64.7739 C528.5,54.7739 546.5,54.7739 546.5,54.7739 C546.5,54.7739 564.5,54.7739 564.5,64.7739 L564.5,90.7739 C564.5,100.7739 546.5,100.7739 546.5,100.7739 C546.5,100.7739 528.5,100.7739 528.5,90.7739 L528.5,64.7739 " fill="#FEFECE" filter="url(#fhcdamnnqx0db)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M528.5,64.7739 C528.5,74.7739 546.5,74.7739 546.5,74.7739 C546.5,74.7739 564.5,74.7739 564.5,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="611.5" y="115.7399">partitions</text><path d="M629,64.7739 C629,54.7739 647,54.7739 647,54.7739 C647,54.7739 665,54.7739 665,64.7739 L665,90.7739 C665,100.7739 647,100.7739 647,100.7739 C647,100.7739 629,100.7739 629,90.7739 L629,64.7739 " fill="#FEFECE" filter="url(#fhcdamnnqx0db)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M629,64.7739 C629,74.7739 647,74.7739 647,74.7739 C647,74.7739 665,74.7739 665,64.7739 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fhcdamnnqx0db)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="33" x="692.5" y="81.7739"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="699.5" y="103.7399">OS</text><rect fill="#EEEEEE" filter="url(#fhcdamnnqx0db)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="726.5" x="8" y="151.6949"/><line style="stroke: #000000; stroke-width: 1.0;" x1="8" x2="734.5" y1="151.6949" y2="151.6949"/><line style="stroke: #000000; stroke-width: 1.0;" x1="8" x2="734.5" y1="154.6949" y2="154.6949"/><rect fill="#EEEEEE" filter="url(#fhcdamnnqx0db)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="90" x="326.25" y="139.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="332.25" y="157.7389">Bootloader</text><polygon fill="#A80036" points="150.5,195.2539,160.5,199.2539,150.5,203.2539,154.5,199.2539" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="54.5" x2="156.5" y1="199.2539" y2="199.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="61.5" y="193.4449">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="72.5" y="193.4449">pass control</text><polygon fill="#A80036" points="397.5,226.9599,407.5,230.9599,397.5,234.9599,401.5,230.9599" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="403.5" y1="230.9599" y2="230.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="169.5" y="225.1509">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="180.5" y="225.1509">read current update state</text><path d="M107,245.9599 L170,245.9599 L170,254.9599 L160,264.9599 L107,264.9599 L107,245.9599 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="441.436" style="stroke: #000000; stroke-width: 2.0;" width="585.5" x="107" y="245.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="122" y="260.8569">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="185" y="259.7188">[normal boot, no updates done]</text><polygon fill="#A80036" points="173.5,285.3719,163.5,289.3719,173.5,293.3719,169.5,289.3719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="545.5" y1="289.3719" y2="289.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="179.5" y="283.5629">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="190.5" y="283.5629">read partition configurations</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="204.5" y1="321.0779" y2="321.0779"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="204.5" x2="204.5" y1="321.0779" y2="334.0779"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="163.5" x2="204.5" y1="334.0779" y2="334.0779"/><polygon fill="#A80036" points="173.5,330.0779,163.5,334.0779,173.5,338.0779,169.5,334.0779" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="169.5" y="315.2689">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="180.5" y="315.2689">select partitions to be used</text><polygon fill="#A80036" points="173.5,361.784,163.5,365.784,173.5,369.784,169.5,365.784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="646" y1="365.784" y2="365.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="179.5" y="359.975">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="190.5" y="359.975">load or use data from current partition</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="692.5" y1="374.784" y2="374.784"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="112" y="386.5429">[boot into a newly installed version]</text><polygon fill="#A80036" points="173.5,410.4719,163.5,414.4719,173.5,418.4719,169.5,414.4719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="545.5" y1="414.4719" y2="414.4719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="179.5" y="408.6629">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="190.5" y="408.6629">read partition configurations</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="204.5" y1="446.1779" y2="446.1779"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="204.5" x2="204.5" y1="446.1779" y2="459.1779"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="163.5" x2="204.5" y1="459.1779" y2="459.1779"/><polygon fill="#A80036" points="173.5,455.1779,163.5,459.1779,173.5,463.1779,169.5,459.1779" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="169.5" y="440.3689">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="180.5" y="440.3689">select partitions to be used</text><polygon fill="#A80036" points="397.5,486.8839,407.5,490.8839,397.5,494.8839,401.5,490.8839" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="403.5" y1="490.8839" y2="490.8839"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="169.5" y="485.0749">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="180.5" y="485.0749">countdown of tries</text><polygon fill="#A80036" points="173.5,518.5899,163.5,522.5899,173.5,526.5899,169.5,522.5899" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="646" y1="522.5899" y2="522.5899"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="179.5" y="516.7809">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="190.5" y="516.7809">load or use data from new partition</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="107" x2="692.5" y1="531.5899" y2="531.5899"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="112" y="543.3488">[no more tries of new version left]</text><polygon fill="#A80036" points="173.5,567.2778,163.5,571.2778,173.5,575.2778,169.5,571.2778" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="545.5" y1="571.2778" y2="571.2778"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="179.5" y="565.4688">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="197.5" y="565.4688">read partition configurations</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="204.5" y1="602.9838" y2="602.9838"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="204.5" x2="204.5" y1="602.9838" y2="615.9838"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="163.5" x2="204.5" y1="615.9838" y2="615.9838"/><polygon fill="#A80036" points="173.5,611.9838,163.5,615.9838,173.5,619.9838,169.5,615.9838" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="169.5" y="597.1748">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="187.5" y="597.1748">use former version</text><polygon fill="#A80036" points="397.5,643.6899,407.5,647.6899,397.5,651.6899,401.5,647.6899" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="403.5" y1="647.6899" y2="647.6899"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="169.5" y="641.8809">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="187.5" y="641.8809">configure former version as recent</text><polygon fill="#A80036" points="173.5,675.3959,163.5,679.3959,173.5,683.3959,169.5,679.3959" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="646" y1="679.3959" y2="679.3959"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="179.5" y="673.5869">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="197.5" y="673.5869">load or use data from old partition</text><polygon fill="#A80036" points="699,714.1019,709,718.1019,699,722.1019,703,718.1019" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="705" y1="718.1019" y2="718.1019"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="169.5" y="712.2929">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="187.5" y="712.2929">pass control</text><!--MD5=[b78d7fd309d042d6e5b6db0146a2bea5]
@startuml upd_bundle_norm_boot_flow

hide footbox
autonumber


box "System"
        participant "hardware" as hw
        participant "bootloader" as bootldr
        database "update environment" as updenv
        database "partition config" as partcfg
        database "partitions" as parts
        participant "OS" as os
end box

mainframe boot of software version


== Bootloader ==

hw -> bootldr : pass control

updenv <- bootldr : read current update state

alt normal boot, no updates done

partcfg -> bootldr : read partition configurations
bootldr -> bootldr :  select partitions to be used
bootldr <-  parts :  load or use data from current partition

else  boot into a newly installed version

partcfg -> bootldr : read partition configurations
bootldr -> bootldr : select partitions to be used
bootldr -> updenv : countdown of tries
bootldr <-  parts :  load or use data from new partition

else no more tries of new version left

partcfg -> bootldr : read partition configurations
bootldr -> bootldr : use former version
bootldr -> updenv : configure former version as recent
bootldr <-  parts :  load or use data from old partition

end


bootldr -> os : pass control



@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.22+7-post-Ubuntu-0ubuntu222.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>
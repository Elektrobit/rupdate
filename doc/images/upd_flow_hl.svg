<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="439px" preserveAspectRatio="none" style="width:714px;height:439px;" version="1.1" viewBox="0 0 714 439" width="714px" zoomAndPan="magnify"><defs><filter height="300%" id="fcca8c2va73t1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="384" cy="18" fill="#000000" filter="url(#fcca8c2va73t1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fcca8c2va73t1)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="293.5" y="89"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="293.5" x2="474.5" y1="118.0679" y2="118.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="324.5" y="108.9659">normal_operation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="298.5" y="135.896">always boot to same version.</text><rect fill="#FEFECE" filter="url(#fcca8c2va73t1)" height="55.412" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="308" x="6" y="223"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="6" x2="314" y1="252.0679" y2="252.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="131" y="242.9659">installed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="288" x="11" y="269.896">a new version was installed in the inactive partitions</text><rect fill="#FEFECE" filter="url(#fcca8c2va73t1)" height="71.7561" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="345" x="211.5" y="357"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="211.5" x2="556.5" y1="386.0679" y2="386.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="18" x="375" y="376.9659">try</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="200" x="216.5" y="403.896">Try if new version is passing selftest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="325" x="216.5" y="420.2401">Prepare revert to previous if new is failing or unresponsive</text><!--MD5=[1ab7ece42cee8da50718c65b6fa84fc9]
link *start to normal_operation--><path d="M384,28.25 C384,40.84 384,64.02 384,83.32 " fill="none" id="*start-&gt;normal_operation" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="384,88.65,388,79.65,384,83.65,380,79.65,384,88.65" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[26a58a50eb9f448b1193f808a4097be1]
link normal_operation to installed--><path d="M308.16,144.06 C287.97,152.44 266.62,162.55 248,174 C227.29,186.74 206.54,204.26 190.39,219.22 " fill="none" id="normal_operation-&gt;installed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="186.39,222.96,195.692,219.7239,190.0381,219.5408,190.2213,213.8869,186.39,222.96" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="249" y="188.897">install upd-bundle</text><!--MD5=[bc126a3bf6620406210d684c92b28c24]
link installed to try--><path d="M202.4,278.09 C236.52,299.5 284.93,329.86 323.19,353.86 " fill="none" id="installed-&gt;try" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="327.81,356.75,322.3054,348.583,323.5724,354.0962,318.0593,355.3632,327.81,356.75" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="280" y="322.897">reboot</text><!--MD5=[6ab4ed4741ad7aad4795aa9babf5bad5]
link try to normal_operation--><path d="M384,356.93 C384,303.2 384,201.29 384,149.48 " fill="none" id="try-&gt;normal_operation" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="384,144.32,380,153.32,384,149.32,388,153.32,384,144.32" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="385" y="237.897">update succeeded</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="400.5" y="255.603">finish update</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="390.5" y="273.309">Use new version</text><!--MD5=[6ab4ed4741ad7aad4795aa9babf5bad5]
link try to normal_operation--><path d="M437.04,356.89 C462.08,337.05 489.41,309.84 503,278 C512.6,255.52 513.03,245.29 503,223 C488.75,191.33 459.78,165.32 433.99,147.04 " fill="none" id="try-&gt;normal_operation-1" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="429.88,144.18,434.9573,152.6193,433.9755,147.0483,439.5465,146.0665,429.88,144.18" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="567.5" y="237.897">update failed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="541" y="255.603">not finished or reboot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="511" y="273.309">Revert and use previous version</text><!--MD5=[c3b8199d9768b46270cacec00639cbb5]
link normal_operation to normal_operation--><path d="M474.53,105.9 C494.75,106.88 509.5,110.41 509.5,116.5 C509.5,122.07 497.17,125.49 479.62,126.79 " fill="none" id="normal_operation-&gt;normal_operation" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="474.53,127.1,483.754,130.5522,479.521,126.7997,483.2735,122.5667,474.53,127.1" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="515.5" y="121.897">rollback to previous version</text><!--MD5=[64aeba20de7db060e455725b2f3bcdbf]
@startuml upd_flow_hl


[*] - -> normal_operation
normal_operation: always boot to same version.

normal_operation - -> installed: install upd-bundle
installed: a new version was installed in the inactive partitions

installed - -> try: reboot
try: Try if new version is passing selftest
try: Prepare revert to previous if new is failing or unresponsive

try - -> normal_operation: update succeeded\nfinish update\nUse new version

try - -> normal_operation: update failed\nnot finished or reboot\nRevert and use previous version


normal_operation - -> normal_operation: rollback to previous version


@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.22+7-post-Ubuntu-0ubuntu222.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>